@model DI.Models.CMYSS_Applicant
@{
    Layout = null;
}
<!DOCTYPE html>

@using (Html.BeginForm("Registration_Login", "Login", FormMethod.Post, new { @class = "", enctype = "multipart/form-data" }))
{
    @Html.AntiForgeryToken()

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    @*<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

    <!-- jQuery library -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

    <!-- Latest compiled JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>*@

    <link href="~/Content/bootstrap.min.css" rel="stylesheet" />
    <script src="~/scripts/jquery-3.2.1.min.js"></script>
    <script src="~/scripts/bootstrap.min.js"></script>
   
<style>
    .Mandatory {
            color:red !important;
           
        }
        .white {
            color: #000;
            background-color: #fff;
        }
.btn-facebook {
            color: #ffffff;
            -webkit-text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.25);
            text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.25);
            background-color: #2b4b90;
            *background-color: #133783;
            background-image: -moz-linear-gradient(top, #3b5998, #133783);
            background-image: -webkit-gradient(linear, 0 0, 0 100%, from(#3b5998), to(#133783));
            background-image: -webkit-linear-gradient(top, #3b5998, #133783);
            background-image: -o-linear-gradient(top, #3b5998, #133783);
            background-image: linear-gradient(to bottom, #3b5998, #133783);
            background-repeat: repeat-x;
            border-color: #133783 #133783 #091b40;
            border-color: rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.25);
            filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#ff3b5998', endColorstr='#ff133783', GradientType=0);
            filter: progid:DXImageTransform.Microsoft.gradient(enabled=false);
        }
 .btn-facebook:hover,
            .btn-facebook:focus,
            .btn-facebook:active,
            .btn-facebook.active,
            .btn-facebook.disabled,
            .btn-facebook[disabled] {
                color: #ffffff;
                background-color: #133783 !important;
                *background-color: #102e6d !important;
            }

            .btn-facebook:active,
            .btn-facebook.active {
                background-color: #0d2456 \9 !important;
            }

        .panel-heading {
            text-align: center;
            background-color: #295888 !important;
            color: #fff !important;
        }

        .panel01 {
            padding: 10px;
        }

        .panel02 {
            border: 1px solid #d2d0d0;
            padding: 10px;
        }

        .panel03 {
            padding: 10px;
        }
      input:focus,textarea:focus,select:focus{ 
    outline: none !important;
    border-color: #38af05 !important;
    box-shadow: 0 0 10px #38af05 !important;
}
    </style>
    <script src="~/scripts/sha256.js"></script>
    <script>
    $(document).ready(function () {

        $("#txtDOB").datepicker({

            dateFormat: "dd/mm/yy",
            changeMonth: true,
            changeYear: true,
            maxDate: year,
        minDate: "-100Y",
        yearRange: '-100:' + year + '',
        defaultDate: d
        });
    });
    function HashPwdwithSalt() {
        var salt = '@Session["salt"]';

        if (document.getElementById("txtUserName").value == "") {
            alert("Please fill UserName");
            return false;
        }
        else if (document.getElementById("txtPassword").value == "") {
            alert("Please fill Password");
            return false;
        }
        else if (document.getElementById("txtPassword").value != "") {

            document.getElementById("txtPassword").value = sha256(document.getElementById("txtPassword").value);

            document.getElementById("txtPassword").value =
              sha256(document.getElementById("txtPassword").value + salt);
            var Objform = {
                "UserName": document.getElementById("txtUserName").value,
                "Password": document.getElementById("txtPassword").value,
            }
            $.ajax({
                url: '/Login/Applicant_Login',
                data: JSON.stringify({ Model: Objform }),
                type: 'POST',
                contentType: 'application/json; charset=utf-8',
                success: function (data) {
                    if (data=="Sucess") {
                        window.open('/User/CMYS_SchemeEntryForm', "_self");
                    }
                    else {
                        alert(data);
                    }
                }
            });
        }

        // return true;

    }
    </script>
    <link href="~/Content/jquery-ui.css" rel="stylesheet" />

    <script src="~/Content/plugins/jquery-ui.js"></script>
    @*<link rel="stylesheet" href="//code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">*@
    @*<script src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script>*@
    @Styles.Render("~/Content/PublicPage")
    @Styles.Render("~/Content/cssBlank")
</head>
<body style="background-color:#fff" oncontextmenu="return false;">
    <header class="header-two-bars">
        <div class="header-first-bar">
            <div class="header-limiter">
                <h1><a href="#">Director of Industries<span></span></a></h1>
                <nav></nav>
                 </div>
        </div>
        <div class="header-second-bar">
            <div class="header-limiter">
                <h2><a href="#" style="font-family: monospacepace;font-weight: 800 !important;font-size: 18px;"> विभिन्न योजनाओ हेतु प्रार्थना पत्र</a></h2>
                <nav>
   @*<a href="#"><i class="fa fa-file-text"></i> Results </a>
                        <a href="#"><i class="fa fa-group"></i> Participants </a>*@
                    <a href="#divInst"><i class="fa fa-cogs hide "></i>  </a>
                    <a href="#divdownloads"><i class="fa fa-cloud-download hide"></i>  </a>
                </nav>
            </div>
        </div>
    </header>
    <div class="container">
        <div class="row">
            <div class="col-md-4">
                <div class="col-md-12 col-md-2offset panel01">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <h3 class="panel-title">Login to your account</h3>
                          
                        </div>
                        <div class="panel-body">
                            <form accept-charset="UTF-8" role="form">
                                <fieldset>
                                   
                                    <div class="alert alert-danger display-hide">
                                        <button class="close" data-close="alert"></button>
                                        <span> Enter any username and password. </span>
                                    </div>
                                    @*<div class="form-group">
                                      

                                        @Html.DropDownListFor(m => m.Scheme, Model.Scheme, new { @id = "ddlScheme", @class = "form-control" })
                                    </div>*@
                                    <div class="form-group">
                                        <!--ie8, ie9 does not support html5 placeholder, so we just show field title for that-->
                                        <label class="control-label visible-ie8 visible-ie9">Username</label>
                                        <div class="input-icon">
                                            <i class="fa fa-user"></i>
                                            <input class="form-control placeholder-no-fix" type="text" autocomplete="off" placeholder="Username" name="username" id="txtUserName">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="control-label visible-ie8 visible-ie9">Password</label>
                                        <div class="input-icon">
                                            <i class="fa fa-lock"></i>
                                            <input class="form-control placeholder-no-fix" type="password" autocomplete="off" placeholder="Password" name="password" id="txtPassword">
                                        </div>
                                    </div>
                                    <div class="form-actions">
                                        <label class="rememberme mt-checkbox mt-checkbox-outline">
                                            <input type="checkbox" name="remember" value="1"> Remember me
                                            <span></span>
                                        </label>
                                        <button type="button" class="btn green pull-right" onclick="HashPwdwithSalt();"> Login </button>
                                    </div>
                                    
                                        <div class="col-md-6">
                                            <button type="button" class="btn red-flamingo" data-toggle="modal" data-target="#myModal"   data-backdrop="static" data-keyboard="false">New User</button>
                                            </div>
                                            <div class="col-md-6">
                                                <label style="color:white">. </label>
                                            </div>
                                    <div class="col-md-6">
                                        <a href="javascript:;" id="" style="text-align:right; padding-bottom:inherit">Forgot your password </a>
                                    </div>
                                    <div class="forget-password">
                                        @*<a href="javascript:;" id="register-btn" class="btn red-flamingo">New User </a>*@@*<p>
                                                no worries, click
                                                <a href="javascript:;" id="forget-password"> here </a> to reset your password.
                                            </p>*@
                                    </div>
                                </fieldset>
                            </form>
                        </div>
                    </div>
                    <div class="panel panel-default">
                        <h3><i class="icon-share font-dark"></i> &nbsp;&nbsp;Application Status</h3>
                        <div class="panel-body">
                            <form accept-charset="UTF-8" role="form">
                                <fieldset>
                                    <div class="form-group">
                                        <div class="input-icon">
                                            <input class="form-control placeholder-no-fix" type="text" autocomplete="off" placeholder="Application No" name="username">
                                        </div>
                                    </div>
                                    <div class="form-actions">
                                        <button type="submit" class="btn green pull-right"> Know Your Application Status </button>
                                    </div>
                                </fieldset>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-8 panel03">
                <div class="portlet light " style="border: 1px solid #ddd;box-shadow: 0 0 4px #ddd; border-radius: 6px 6px;" id="divdownloads">
                    <div class="portlet-title tabbable-line">
                        <div class="caption" id="down">
                            <i class="icon-cloud-download font-dark"></i>
                            <span class="caption-subject font-dark bold uppercase">Instructions</span>
                        </div>
                        <ul class="nav nav-tabs">
                            <li class="active">
                                <a href="#portlet_tab2_1" data-toggle="tab" id="instruction" aria-expanded="true"> Links </a>
                            </li>
                        </ul>
                    </div>
                    <div class="portlet-body">
                        <div class="tab-content">
                            <div class="tab-pane active" id="portlet_tab2_1">
                                <h4>दस्तावेजों की सूची :-</h4>
                                <ul>
                                    <li> आवेदक / अधिकृत व्यक्ति का फोटो</li>
                                    <li> परियोजना प्रतिवेदन</li>
                                    <li> उत्तर प्रदेश का मूल निवासी / स्थानीय निवासी / अथवा मूल निवासी हेतु निर्धारित प्रपत्र पर स्वप्रमानीकरण</li>
                                    <li> आधार कार्ड</li>
                                    <li> शैक्षणिक योग्यता संबंधी प्रमाण-पत्र</li>
                                    <li> जन्मतिथि संबंधी प्रमाण-पत्र</li>
                                    <li> सक्षम प्राधिकारी द्वारा जारी निशक्तजन संबंधी प्रमाण-पत्र (यदि लागू हो तो)</li>
                                    <li> भूमि/भवन किराए पर लिया हो तो किरायानामा (यदि लागू हो तो)</li>
                                    <li> मशीनरी/उपकरण/साज-सज्जा हेतु वर्तमान दरों के कोटेशन(यदि लागू हो तो)</li>
                                    <li> जाति प्रमाण पत्र(यदि लागू हो तो)</li>
                                    <li> अन्य पिछड़ा वर्ग के अंतर्गत क्रीमीलेयर की सीमा से अधिक होने की स्थिति में सक्षम अधिकारी द्वारा जारी किया आय प्रमाण-पत्र (यदि लागू हो तो)</li>
                                    <li> उद्यमिता विकास प्रशिक्षण प्राप्त किया हो तो प्रमाणपत्र संलग्न करें(यदि लागू हो तो)</li>
                                    <li> बीoपीoएलo राशन कार्ड की प्रतिलिपि (यदि लागू हो तो)</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="portlet light " style="border: 1px solid #ddd;box-shadow: 0 0 4px #ddd; border-radius: 6px 6px;" id="divInst">
                    <div class="portlet-title tabbable-line">
                        <div class="caption" id="down">
                            <i class="icon-info font-dark"></i>
                            <span class="caption-subject font-dark bold uppercase">Downloads</span>
                        </div>

                        <ul class="nav nav-tabs">
                            <li class="active">
                                <a href="#portlet_tab2_1" data-toggle="tab" id="instruction" aria-expanded="true"> Help </a>
                            </li>
                        </ul>
                    </div>
                    <div class="portlet-body">
                        <div class="tab-content">
                            <div class="tab-pane active" id="portlet_tab2_1">
                                <p> <a href="~/PDF/industrial_estate.pdf"> मुख्यमंत्री युवा स्वरोजगार योजना, उ0प्र0 प्रार्थना-पत्र (दो-प्रतियों में) </a></p>
                                <p><a href="~/PDF/industrial_estate.pdf"> मुख्यमंत्री युवा स्वरोजगार योजना, उ0प्र0(परियोजना प्रारूपं) </a></p>
                                <p><a href="~/PDF/industrial_estate.pdf">निर्देश</a></p>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
  

    <div id="myModal" class="modal fade" role="dialog">
        <div class="modal-dialog">

            <!-- Modal content-->
            <div class="modal-content">

                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h2><i class="icon-book-open">&nbsp;&nbsp;&nbsp;<label>New Registration </label>  </i></h2>
                </div>
                <div class="modal-body">
                    <form>
                        @*<div class="panel-primary">


                </div>*@
                        <div class="col-sm-12 panel02">
                            @*<div class="caption" id="down">
                        <i class="icon-cloud-download font-dark"></i>
                        <span class="caption-subject font-dark bold uppercase">Registration Form</span>
                    </div>*@
                            <div class="row">
                                <div class="col-sm-6 form-group">
                                    <label id="lblscheme">Scheme<span class="Mandatory">*</span></label>
                                    @*<select id="schema" class="form-control select2-container ">
                                <option>Select Schema</option>
                                <option value="AK">MYSY</option>
                                <option value="HI">MYSY2</option>
                            </select>*@
                                    @Html.DropDownListFor(m => m.Scheme, Model.Scheme, new { @id = "ddlRegScheme", @class = "form-control" })
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-6 form-group">
                                    <label  id="lblname">Name<span class="Mandatory">*</span></label>
                                    @Html.TextBoxFor(m => m.applicant_name, new { @class = "form-control", @id = "txtName", @placeholder = "नाम ", @Maxlength = 40 })
                                </div>
                                <div class="col-sm-6 form-group">
                                    <label id="lbldob">Date Of Birth<span class="Mandatory">*</span></label>
                                    @Html.EditorFor(model => model.inputdob, new { htmlAttributes = new { @class = "form-control", @onkeypress = "return IsNumeric(event);", @Value = "", @placeholder = "dd/mm/yy", @id = "txtDOB", @Maxlength = "10" } })
                                    @Html.ValidationMessageFor(model => model.dob, "", new { @class = "text-danger" })
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-6 form-group">
                                    <label id="lblfather">Father's Name<span class="Mandatory">*</span></label>
                                    @Html.TextBoxFor(m => m.Husband_father_name, new { @class = "form-control", @id = "txtHusband_father_name", @placeholder = "पिता/पति का नाम ", @Maxlength = 40 })
                                </div>
                                <div class="col-sm-6 form-group">
                                    <label id="lbladhar">Aadhaar  No<span class="Mandatory">*</span></label>
                                    @Html.TextBoxFor(m => m.adhar_no, new { @class = "form-control", @id = "txtAdhar_card_No", @placeholder = "आधार कार्ड नं0 ", @onkeypress = "return IsNumeric(event);", @Maxlength = 16 })
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-6 form-group">
                                    <label id="lblphone">Phone Number<span class="Mandatory">*</span></label>
                                    @Html.TextBoxFor(m => m.mobile_no, new { @class = "form-control", @id = "txtMobile_No", @placeholder = "मोबाइल नं0", @onkeypress = "return IsNumeric(event);", @Maxlength = 10 })
                                </div>
                                <div class="col-sm-6 form-group">
                                    <label id="lblemail">Email Address</label>
                                    @Html.TextBoxFor(m => m.email, new { @class = "form-control", @id = "txtEmailID", @placeholder = "ई-मेल आई0डी0 (यदि हो तो)", @onblur = "return validateEmail(this)", @Maxlength = "40" })
                                </div>
                            </div>
                            <div class="form-group">
                                <label id="lbladress">Address<span class="Mandatory">*</span></label>
                                @Html.TextAreaFor(m => m.current_address, new { @class = "form-control", @id = "txtCurrentAddress", @placeholder = "पत्र व्यवहार का पता", @Maxlength = 45 })
                            </div>
                            @*<div class="row">
                        <div class="col-sm-4 form-group">
                            <label>City</label>
                            <input type="text" placeholder="Enter City Name Here.." class="form-control">
                        </div>
                        <div class="col-sm-4 form-group">
                            <label>State</label>
                            <input type="text" placeholder="Enter State Name Here.." class="form-control">
                        </div>
                        <div class="col-sm-4 form-group">
                            <label>Zip</label>
                            <input type="text" placeholder="Enter Zip Code Here.." class="form-control">
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Address</label>
                        <textarea placeholder="Enter Address Here.." rows="3" class="form-control"></textarea>
                    </div>*@
                            @*<div class="row">
                        <div class="col-sm-6 form-group">
                            <label>Title</label>
                            <input type="text" placeholder="Enter Designation Here.." class="form-control">
                        </div>
                        <div class="col-sm-6 form-group">
                            <label>Company</label>
                            <input type="text" placeholder="Enter Company Name Here.." class="form-control">
                        </div>
                    </div>*@
                            <button type="button" class="btn btn-lg btn-info" onclick="Save()" >Submit</button>
                        </div>
                    </form>
                </div>
                    @*
            <div class="modal-body">
                <p>Some text in the modal.</p>
            </div>*@
                    <div class="modal-footer">
                        <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
                    </div>
                </div>

        </div>
    </div>



</body>
</html>
<script>
    function Save() {
        try {
            if (document.getElementById("ddlRegScheme").value == "-1") {
                document.getElementById("ddlRegScheme").focus();
                $('#lblscheme').css('color', 'red');
                alert("योजना");
                return;
            }
            if (document.getElementById("txtName").value == "") {
                document.getElementById("txtName").focus();
                $('#lblname').css('color', 'red');
                alert("नाम");
                return;
            }
            if (document.getElementById("txtDOB").value == "") {
                document.getElementById("txtDOB").focus();
                $('#lbldob').css('color', 'red');
                alert("जन्म की तारीख");
                return;
            }
            if (document.getElementById("txtHusband_father_name").value == "") {
                document.getElementById("txtHusband_father_name").focus();
                $('#lblfather').css('color', 'red');
                alert("पिता/पति का नाम");
                return;
            }
            if (document.getElementById("txtAdhar_card_No").value == "") {
                document.getElementById("txtAdhar_card_No").focus();
                $('#lbladhar ').css('color', 'red');
                alert("आधार कार्ड नं0 ");
                return;
            }
            if (document.getElementById("txtMobile_No").value == "") {
                document.getElementById("txtMobile_No").focus();
                $('#lblphone').css('color', 'red');
                alert("मोबाइल नं0 ");
                return;
            }

            if (document.getElementById("txtCurrentAddress").value == "") {
                document.getElementById("txtCurrentAddress").focus();
                $('#lbladress').css('color', 'red');
                alert("पत्र व्यवहार का पता");
                return;
            }

            var dob = $("#txtDOB").val();
            var now = new Date();
            var birthdate = dob.split("/");
            var born = new Date(birthdate[2], birthdate[1] - 1, birthdate[0]);
            age = get_age(born, now);

            console.log(birthdate[2] + " : " + birthdate[1] + " : " + birthdate[0]);
            console.log(age);

            if (age <= 18) {
                $('#lbldob').css('color', 'red');
                document.getElementById("txtDOB").focus();
                alert(" Age should be greater then or equal to 18");
                return;
            }
            if (age >= 40) {
                $('#lbldob').css('color', 'red');
                document.getElementById("txtDOB").focus();
                alert(" Age should be smaller then or equal to 40");
                return false;
            }

            var Objform = {
                "applicant_code": "-1",
                "yojana_code": document.getElementById("ddlRegScheme").value,
                "applicant_name": document.getElementById("txtName").value,
                "inputdob": document.getElementById("txtDOB").value,
                "adhar_no": document.getElementById("txtAdhar_card_No").value,
                "Husband_father_name": document.getElementById("txtHusband_father_name").value,
                "current_address": document.getElementById("txtCurrentAddress").value,
                "mobile_no": document.getElementById("txtMobile_No").value,
                "email": document.getElementById("txtEmailID").value == "" ? " " : document.getElementById("txtEmailID").value,

            }
            $.ajax({

                url: '/Login/InsertUpdateCMYSS_Applicant',
                data: JSON.stringify({ Objform: Objform }),
                type: 'POST',
                contentType: 'application/json; charset=utf-8',
                success: function (data) {
                    alert(data);
                    if (data = "Date of Birth must be dd/mm/yyyy format")
                    {
                        $('#lbldob').css('color', 'red');
                        document.getElementById("txtDOB").focus();
                    }
                    if (data.includes("Save")) {
                        document.getElementById("ddlRegScheme").value = "-1";
                        document.getElementById("txtName").value = "";
                        document.getElementById("txtDOB").value = "";
                        document.getElementById("txtAdhar_card_No").value = "";
                        document.getElementById("txtHusband_father_name").value = "";
                        document.getElementById("txtCurrentAddress").value = "";
                        document.getElementById("txtMobile_No").value = "";
                        document.getElementById("txtEmailID").value = "";
                    }


                }
            });
        } catch (e) {
            alert(e);
        }
        
    }
   
    var specialKeys = new Array();
    specialKeys.push(47); // for Forward Slash(/)
    specialKeys.push(8); //Backspace
    specialKeys.push(9); // Tab
    specialKeys.push(46); // for .
    specialKeys.push(37); // for left Arrow
    specialKeys.push(39); // for Right Arrow
    function IsNumeric(e) {
        var keyCode = e.which ? e.which : e.keyCode
        var ret = ((keyCode >= 48 && keyCode <= 57) || specialKeys.indexOf(keyCode) != -1); // For Decimal To All Number
        if (ret == false) {
            alert("Only numaric value allwed.");
        }
        return ret;
    }
    $(document).ready(function () {
        try {
            $("input[type='text']").each(function () {
                $(this).attr("autocomplete", "nope");
            });
        }
        catch (e)
        { }
    });
    function validateEmail(txt) {
        var emailText = txt.value;
        var pattern = /^[a-zA-Z0-9\-_]+(\.[a-zA-Z0-9\-_]+)*@@[a-z0-9]+(\-[a-z0-9]+)*(\.[a-z0-9]+(\-[a-z0-9]+)*)*\.[a-z]{2,4}$/;
        if (pattern.test(emailText)) {
            return true;
        } else {
            txt.value = "";
            alert('Bad email address: ' + emailText);
            return false;
        }
    }
</script>
<script>
    
    document.onkeypress = function (event) {
        event = (event || window.event);
        if (event.keyCode == 123) {
            return false;
        }
        
    }
    document.onmousedown = function (event) {
        event = (event || window.event);
        if (event.keyCode == 123) {
            return false;
        }
    }
    document.onkeydown = function (event) {
        event = (event || window.event);
        if (event.keyCode == 123) {
            return false;
        }
        if (event.ctrlKey && event.shiftKey && event.keyCode == 'I'.charCodeAt(0)) {
            return false;
        }
        if (event.ctrlKey && event.shiftKey && event.keyCode == 'C'.charCodeAt(0)) {
            return false;
        }
        if (event.ctrlKey && event.shiftKey && event.keyCode == 'J'.charCodeAt(0)) {
            return false;
        }
        if (event.ctrlKey && event.keyCode == 'U'.charCodeAt(0)) {
            return false;
        }
    }
</script>
<script>
    var d = new Date();
    var year = d.getFullYear() - 18;
    d.setFullYear(year);

    //$("#txtDOB").datepicker({
    //    dateFormat: "dd/mm/yy",
    //    changeMonth: true,
    //    changeYear: true,
    //    maxDate: year,
    //    minDate: "-100Y",
    //    yearRange: '-100:' + year + '',
    //    defaultDate: d
    //});

    function get_age(born, now) {
        var birthday = new Date(now.getFullYear(), born.getMonth(), born.getDate());
        if (now >= birthday)
            return now.getFullYear() - born.getFullYear();
        else
            return now.getFullYear() - born.getFullYear() - 1;
    }

</script>
}
}