@model DI.Models.Yojona_Master
@{
    ViewBag.Title = "InsertUpdateYojona_Master";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@using System.Data;
@using DI.Models;
@using DI.DAL;
@using DI.BLL;

@{
    Yojona_Master Objform = new Yojona_Master();
    //var grid = new WebGrid(Model, rowsPerPage: 20);
    DataTable dt = new DataTable();

    if (Request["Status"] != null)
    {
        // Objform.applicant_name = "hello";
        dt = new CommonDA().GetYojona_Master(Objform);
    }
    else
    {
        dt = new CommonDA().GetYojona_Master(Objform);
    }

}

@using (Html.BeginForm("InsertUpdateYojona_Master", "Form", FormMethod.Post, new { @class = "", enctype = "multipart/form-data" }))
{
    @Html.AntiForgeryToken()
    <div class="portlet-title">
        <div class="caption font-green">
            <i class="icon-pin font-green"></i>
            <span class="caption-subject bold uppercase"> जनपद में योजना विवरण </span>
        </div>
    </div>

    <div class="row">
        <div class="col-md-12">
            <div class="portlet light bordered">
                <div class="portlet-title">
                    <div class="caption">
                        <i class="icon-equalizer font-red-sunglo"></i>
                        <span class="caption-subject font-red-sunglo bold uppercase">औद्योगिक आस्थानों योजना </span>
                        <span class="caption-helper">... </span>
                    </div>
                 
                </div>
                <div class="portlet-body form">
                    <!-- BEGIN FORM-->
                    <form action="#" class="form-horizontal">
                        <div class="form-body" style="padding: 0px !important">
                            @*<h3 class="form-section">Info</h3>*@

                            <div class="row">
                                <div class="col-md-2">
                                    <div class="radio-list" style="margin-left:20px">सक्रिये 
                                        <div class="form-group">
                                            <label class="radio-inline">
                                                @Html.RadioButtonFor(m => m.status, "A", new { @name = "statusRadios", @id = "statusRadiosYes", @value = "A", @checked = "" })हाँ
                                            </label>
                                            <label class="radio-inline">
                                                @Html.RadioButtonFor(m => m.status, "D", new { @name = "statusRadios", @id = "statusRadiosNo", @value = "D" })नहीं
                                            </label>
                                        </div>
                                          </div>
                                        <!--/span-->
                                    </div>
                                    <!--/span-->
                                    <div class="col-md-3">
                                        <div class="form-group">
                                            <label class="control-label col-md-12" style="text-align:left">योजना का नाम</label>
                                            <div class="col-md-12">
                                                <input id="hfsptype" type="hidden" value="Insert" />
                                                <input id="hfyojana_code" type="hidden" value="-1" />

                                                @Html.TextBoxFor(m => m.yojana_name, new { @class = "form-control", @id = "txt_Yojona", @placeholder = "योजना का नाम",  @Maxlength = 150 })
                                            </div>
                                        </div>
                                    </div>
                                    <!--/span-->
                                    <div class="col-md-3">
                                        <div class="form-group">
                                            <label class="control-label col-md-col-md-12" style="text-align:left; margin-left:20px"> योजना का नाम </label>
                                            <div class="col-md-12">
                                                @Html.TextBoxFor(m => m.yojana_name_u, new { @class = "form-control", @id = "txtYojona_name", @placeholder = "योजना का नाम", @Maxlength = 150 })
                                            </div>
                                        </div>
                                    </div>

                                <div class="col-md-3">
                                    <div class="row">
                                        <div class="col-md-offset-3 col-md-12" style="margin-top:25px" >
                                            <button type="submit" class="btn green" onclick="Save(document.getElementById('hfsptype').value)" id="btnsave">Submit</button>
                                            <button type="button" class="btn red" onclick="res()">Cancel</button>
                                        </div>
                                    </div>
                                </div>

                                </div>
                        
                    </form>
                    <!-- END FORM-->
                </div>
            </div>
        </div>
    </div>


    <!-- Begin: life time stats -->
    <div class="portlet light">
        <div class="portlet-title">
            <div class="caption">
                <i class="fa fa-th-list"></i>भूखंड विवरण एवं संशोधन
            </div>
            <div class="actions">

                <div class="btn-group">
                    <a class="btn btn-circle btn-default dropdown-toggle" href="javascript:;" data-toggle="dropdown">
                        <i class="fa fa-share"></i>
                        <span class="hidden-xs"> Tools </span>
                        <i class="fa fa-angle-down"></i>
                    </a>
                    <div class="dropdown-menu pull-right">
                        <li>
                            <a href="javascript:;"> Export to Excel </a>
                        </li>
                        <li>
                            <a href="javascript:;"> Export to CSV </a>
                        </li>
                        <li>
                            <a href="javascript:;"> Export to XML </a>
                        </li>

                    </div>
                </div>
            </div>
        </div>
        <div class="portlet-body">
            <div class="table-container" style="overflow-y: scroll; height: 330px;">
                <div class="table-actions-wrapper">
                    <span> </span>
                    <select class="table-group-action-input form-control input-inline input-small input-sm">
                        <option value="">Select...</option>
                        <option value="publish">विवादित </option>
                        <option value="unpublished">आवंटित </option>
                        <option value="delete">उपलब्ध </option>
                    </select>
                    <button class="btn btn-sm btn-success table-group-action-submit">
                        <i class="fa fa-check"></i> खोजें
                    </button>
                </div>
                <table class="table table-striped table-bordered table-hover table-checkable" id="datatable_products"   >
                    <thead>
                        <tr role="row" class="heading">

                            <th width="10%"> क्र० सं० </th>
                            <th width="15%"> योजना&nbsp;का नाम </th>
                            <th width="15%"> योजना &nbsp;का नाम </th>
                            <th width="15%"> सक्रिये  </th>
                            <th width="10%"> दिनाँक  </th>
                            <th width="10%">  </th>
                            <th width="10%">  </th>
                        </tr>

                        @if (dt != null)
                        {
                            if (dt.Rows.Count > 0)
                            {
                                for (int i = 0; i < dt.Rows.Count; i++)
                                {
                                    <tr role="row" class="filter">
                                        <td>@(i + 1)</td>
                                        <td>@dt.Rows[i]["yojana_name"].ToString().Trim()</td>
                                        <td>@dt.Rows[i]["yojana_name_u"].ToString().Trim()</td>    
                                        <td>@dt.Rows[i]["status"].ToString().Trim()</td> 
                                        <td>@dt.Rows[i]["Date"].ToString().Trim()</td> 
                                                                                                               
                                        <td>
                                            <button type="button" class="btn green" onclick="edit('@dt.Rows[i]["yojana_code"].ToString().Trim()','@dt.Rows[i]["yojana_name"].ToString().Trim()','@dt.Rows[i]["yojana_name_u"].ToString().Trim()','@dt.Rows[i]["status"].ToString().Trim()')">Edit</button>
                                        </td>
                                        <td>
                                           <button type="button" class="btn red" onclick="del('@dt.Rows[i]["yojana_code"].ToString().Trim()')">Delete</button>
                                        </td>
                                    </tr>
                                }
                            }
                        }

                    </thead>
                    <tbody> </tbody>
                </table>

            </div>
        </div>
  </div>

    <script type="text/javascript">

    function res() {
        location.reload();
    }
        function Save(sptype)
    {
            var status;
            if (document.getElementById("txt_Yojona").value == "") {
                document.getElementById("txt_Yojona").focus();
                alert("योजना का नाम");
                return;
            }
            if (document.getElementById("txtYojona_name").value == "") {
                document.getElementById("txtYojona_name").focus();
                alert("योजना का नाम");
                return;
            }
           
            if (document.getElementById('statusRadiosYes').checked )
            {
                status = "A";
            }
            else {
                status = "D";
            }
            
            var Objform = {
                "yojana_code": document.getElementById("hfyojana_code").value,                       
                "yojana_name": document.getElementById("txt_Yojona").value,
                "yojana_name_u": document.getElementById("txtYojona_name").value,
               
                "status": status,
            
                 
              
                            
                    }
                    $.ajax({
                        url: '/Form/InsertUpdateYojona_Master_',
                        data: JSON.stringify({ Objform: Objform, sptype: sptype }),
                        type: 'POST',
                        contentType: 'application/json; charset=utf-8',
                        success: function (data) {
                            alert(data);
                            location.reload();
                        }
                    });
        }
        //var specialKeys = new Array();
        //specialKeys.push(47); // for Forward Slash(/)
        //specialKeys.push(8); //Backspace
        //specialKeys.push(9); // Tab
        //specialKeys.push(46); // for .
        //specialKeys.push(37); // for left Arrow
        //specialKeys.push(39); // for Right Arrow
        //function IsNumeric(e) {
        //    var keyCode = e.which ? e.which : e.keyCode
        //    var ret = ((keyCode >= 48 && keyCode <= 57) || specialKeys.indexOf(keyCode) != -1); // For Decimal To All Number
        //    if (ret == false) {
        //        alert("Only numaric value allwed.");
        //    }
        //    return ret;
        //}
        function edit(yojana_code, yojana_name, yojana_name_u)
        {
           
            document.getElementById("hfyojana_code").value = yojana_code;
         
            document.getElementById("txt_Yojona").value = yojana_name;
            document.getElementById("txtYojona_name").value = yojana_name_u;
            if (status == "A") {
                document.getElementById("statusRadiosYes").value = status;
            }
            else
            {
                document.getElementById("statusRadiosNo").value = status;
            }
           
            document.getElementById("hfsptype").value = "Update";
            
            $('#btnsave').html('Update');

        }
       

        function del(X) {

          
            var Objform ={ 
                "yojana_code": X,                           
                "yojana_name": "X",
                "yojana_name_u": "X",
                "status": "X",
                "Mode":"D",//document.getElementById("plotallottedYes").value,
                          
            }
            $.ajax({
                url: '/Form/InsertUpdateYojona_Master_',
                data: JSON.stringify({ Objform: Objform, sptype: 'D' }),
                type: 'POST',
                contentType: 'application/json; charset=utf-8',
                success: function (data) {
                    alert(data);
                    location.reload();
                }
            });
        }

    </script>
}
<!-- End: life time stats -->

