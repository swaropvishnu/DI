@model DI.Models.IndustrialAreaMasterModal
@{
    ViewBag.Title = "AddAreaView";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<script>
    $(document).ready(function () {
      
        $("#Establishment").datepicker({

          dateFormat: "dd/mm/yy",
          changeMonth: true,
          changeYear: true
      });
    });
    
</script>
<!-- BEGIN SAMPLE FORM PORTLET-->
<div class="portlet light ">
    <div class="portlet-title">
        <div class="caption font-green">
            <i class="icon-pin font-green"></i>
            <span class="caption-subject bold uppercase"> जनपद में स्थापित औद्योगिक आस्थानो का विवरण </span>
        </div>
        @*<div class="actions">
            <div class="btn-group">
                <a class="btn btn-sm default dropdown-toggle" href="javascript:;" data-toggle="dropdown">
                    Settings
                    <i class="fa fa-angle-down"></i>
                </a>
                <ul class="dropdown-menu pull-right">
                    <li>
                        <a href="javascript:;">
                            <i class="fa fa-pencil"></i> Edit
                        </a>
                    </li>
                    <li>
                        <a href="javascript:;">
                            <i class="fa fa-trash-o"></i> Delete
                        </a>
                    </li>
                    <li>
                        <a href="javascript:;">
                            <i class="fa fa-ban"></i> Ban
                        </a>
                    </li>
                    <li class="divider"> </li>
                    <li>
                        <a href="javascript:;"> Make admin </a>
                    </li>
                </ul>
            </div>
        </div>*@
    </div>
    <div class="portlet-body form">
        @using (Html.BeginForm("AddArea", "IndustrialAreaMaster",
                                               //new { ReturnUrl = ViewBag.ReturnUrl },
                                               FormMethod.Post, new { @class = "", enctype = "multipart/form-data" }))

      {
        @*@Html.AntiForgeryToken()*@

            <div class="portlet light bordered">
                <div class="portlet-title">
                    <div class="caption">
                        <i class="icon-equalizer font-red-sunglo"></i>
                        <span class="caption-subject font-red-sunglo bold uppercase">औद्योगिक आस्थानो की प्रविष्टि </span>
                        @*<span class="caption-helper">उद्यमिता के प्रोत्साहन हेतु </span>*@
                    </div>
                    @*<div class="tools">
                        <a href="" class="collapse" data-original-title="" title=""> </a>
                        <a href="#portlet-config" data-toggle="modal" class="config" data-original-title="" title=""> </a>
                        <a href="" class="reload" data-original-title="" title=""> </a>
                        <a href="" class="remove" data-original-title="" title=""> </a>
                    </div>*@
                </div>
                <div class="portlet-body form">
                    <!-- BEGIN FORM-->
                    <form action="#" class="form-horizontal">
                        <div class="form-body" style="padding: 0px !important">
                            <h3 class="form-section">आस्थान विवरण</h3>
                            <div class="row">
                                <div class="col-md-3">
                                    <div class="form-group">
                                        <label class="control-label col-md-12">आस्थान का नाम</label>
                                        <div class="col-md-12">
        @Html.TextBoxFor(m => m.IndustrialAreaName, new { @class = "form-control", @placeholder = "आस्थान का नाम", @id = "txtEstablished_industrial" , @onkeypress = "return validate(event);" })                                         
                                            <input id="hfIndustrialAreaCode" type="hidden" value="-1" />    
                                           </div>
                                    </div>
                                </div>
                                <!--/span-->
                                <div class="col-md-3">
                                    <div class="form-group">
                                        <label class="control-label col-md-12">स्थापना वर्ष</label>
                                        <div class="col-md-12">
                                            @*<input id="Indrustry_start_year" name="Indrustry_start_year" onkeypress="return IsNumeric(event);"  class = "form-control"  />*@
                                          @Html.EditorFor(model => model.Establishment, new { htmlAttributes = new { @class = "form-control", @onkeypress = "return IsNumeric(event);", @Value="", @placeholder ="dd/mm/yy" ,@id= "Establishment" } })
                                          @Html.ValidationMessageFor(model => model.Establishment, "", new { @class = "text-danger" })                                                                
                                        </div>
                                    </div>
                                </div>
                                <!--/span-->
                                <div class="col-md-3">
                                    <div class="form-group">
                                        <label class="control-label col-md-12">पता</label>
                                        <div class="col-md-12">
                                            @Html.TextBoxFor(m => m.Address, new { @class = "form-control", @id = "txtAddress", @placeholder = "पता", @Maxlength = 20 })                                            
                                        </div>
                                    </div>
                                </div>
                                <!--/span-->
                                <div class="col-md-3">
                                    <div class="form-group">
                                        <label class="control-label col-md-12">जनपद</label>
                                        <div class="col-md-12">
                                            @Html.DropDownListFor(m => m.DistrictNames, Model.DistrictNames, "--Select--", new { @id = "ddlDistrict", @class = "form-control" })                                            
                                        </div>
                                    </div>
                                </div>
                                <!--/span-->
                            </div>
                            <!--/row-->

                            <div class="row">
                                <div class="col-md-3">
                                    <div class="form-group">
                                        <label class="control-label col-md-12">तहसील </label>
                                        <div class="col-md-12">
                                            @Html.DropDownListFor(m => m.TehsilName, new List<SelectListItem>(), "--Select--", new { @id = "ddlTehsil", @class = "form-control" })                                            
                                        </div>
                                    </div>
                                </div>
                                <!--/span-->
                                <div class="col-md-3">
                                    <div class="form-group">
                                        <label class="control-label col-md-12">ब्लॉक   </label>
                                        <div class="col-md-12">
                                         @Html.DropDownListFor(m => m.BlockName, new List<SelectListItem>(), "--Select--", new { @id = "ddlBlock", @class = "form-control" })                                            
                                        </div>
                                    </div>
                                </div>
                                <!--/span-->
                                <div class="col-md-3">
                                    <div class="form-group">
                                        <label class="control-label col-md-12">ग्राम </label>
                                        <div class="col-md-12">
                                            @Html.DropDownListFor(m => m.VillageName, new List<SelectListItem>(), "--Select--", new { @id = "ddlVillage", @class = "form-control" })
                                        </div>
                                    </div>
                                </div>
                                <!--/span-->
                                <div class="col-md-3">
                                    <div class="form-group">
                                        <label class="control-label col-md-12">पिन कोड </label>
                                        <div class="col-md-12">
                                            @Html.TextBoxFor(m => m.PinCode, new { @class = "form-control", @id = "txtPincode", @placeholder = "पिन कोड" , @onkeypress = "return IsNumeric(event);" ,@Maxlength=6, @Value = "" })  
                                        </div>
                                    </div>
                                </div>
                                <!--/span-->
                            </div>
                            <!--/row-->

                            @*<h3 class="form-section">संपत्ति की जानकारी</h3>*@
                            <div class="row">
                                <div class="col-md-3">
                                    <div class="form-group">
                                        <label class="control-label col-md-12">क्षेत्रफल (वर्ग मी०)</label>
                                        <div class="col-md-12">
                                            @Html.TextBoxFor(m => m.AreaPerSqfeet, new { @class = "form-control", @id = "txtArea", @placeholder = "क्षे० (वर्ग मी०)", @onkeypress = "return IsNumeric(event);" })  
                                        </div>
                                    </div>
                                </div>
                                <!--/span-->
                                <div class="col-md-3">
                                    <div class="form-group">
                                        <label class="control-label col-md-12">वर्तमान प्रचलित दर(वर्ग मीटर)</label>
                                        <div class="col-md-12">
                                            @Html.TextBoxFor(m => m.DistancePerSqFeet, new { @class = "form-control", @id = "txtdistance", @placeholder = "दूरी (वर्ग मी०)", @onkeypress = "return IsNumeric(event);" })           
                                        </div>
                                    </div>
                                </div>
                                <!--/span-->
                                <div class="col-md-3">
                                    <div class="form-group">
                                        <label class="control-label col-md-12">भूखंड (संख्या) </label>
                                        <div class="col-md-12">
            @Html.TextBoxFor(m => m.PlotNo, new { @class = "form-control", @id = "txtCurrentlynumbertotaldevelopedlandarea", @placeholder = "भूखंड (संख्या)" ,@onkeypress = "return IsNumeric(event);" })   
                                        </div>
                                    </div>
                                </div>
                                <!--/span-->
                                <div class="col-md-3">
                                    <div class="form-group">
                                        <label class="control-label col-md-12">शेड (संख्या) </label>
                                        <div class="col-md-12">
            @Html.TextBoxFor(m => m.ShadeNo, new { @class = "form-control", @id = "txttotaldevelopedlandarea_Number_sheds", @onkeypress = "return IsNumeric(event);" })   
                                        </div>
                                    </div>
                                </div>
                                <!--/span-->
                            </div>
                            <!--/row-->

                            <h3 class="form-section">उपलब्ध अवस्थापना सुविधाए</h3>
                            <div class="row">
                                <div class="col-md-3">
                                    <div class="form-group">
                                        <label class="control-label col-md-12">निकटतम रेलवे स्टेशन से दूरी (कि० मी०)</label>
                                        <div class="col-md-12">
                                            @Html.TextBoxFor(m => m.NearestRailwayStationKm, new { @class = "form-control", @id = "txtDistancekilometers_station" })
                                        </div>
                                    </div>
                                </div>
                                <!--/span-->
                                <div class="col-md-3">
                                    <div class="form-group">
                                        <label class="control-label col-md-12">निकटतम बस स्टेशन से दूरी (कि० मी०) </label>
                                        <div class="col-md-12">
                                            @Html.TextBoxFor(m => m.NearestBusStationKM, new { @class = "form-control", @id = "txtAccess_distancenet_bus_stand" })
                                            @*<span class="help-block"> This is inline help </span>*@
                                        </div>
                                    </div>
                                </div>
                                <!--/span-->
                                <div class="col-md-3">
                                    <div class="form-group">
                                        <label class="control-label col-md-12">पहुँच सड़क उपलब्धता</label>
                                        <div class="col-md-12">
                           @Html.CheckBoxFor(m => m.IsStreet, new { @name = "Accessibility_location_available_notRadios", @id = "Accessibility_location_available_notYes", @class= "" })
                                        </div>
                                    </div>
                                </div>
                                <!--/span-->
                                <div class="col-md-3">
                                    <div class="form-group">
                                        <label class="control-label col-md-12">बिजली उपलब्धता</label>
                                        <div class="col-md-12">
                         @Html.CheckBoxFor(m => m.IsElectriccity, new { @name = "Whether_electricity_Available_notRadios", @id = "Whether_electricity_Available_notRadiosYes", @class = ""})
                                        </div>
                                    </div>
                                </div>
                                <!--/span-->
                            </div>
                            <!--/row-->

                            <div class="row">
                                <div class="col-md-3">
                                    <div class="form-group">
                                        <label class="control-label col-md-12">जल निकासी उपलब्धता</label>
                                        <div class="col-md-12">
                                            @Html.CheckBoxFor(m => m.IsDrainage, new { @name = "Whether_Drainage_facility_AvailableRadios", @id = "Whether_Drainage_facility_AvailableRadiosYes", @class = ""})
                                            <span class="help-block">  </span>
                                        </div>
                                    </div>
                                </div>
                                <!--/span-->
                                <div class="col-md-3">
                                    <div class="form-group">
                                        <label class="control-label col-md-12">पेयजल उपलब्धता </label>
                                        <div class="col-md-12">
                                            @Html.CheckBoxFor(m => m.IsDrinkingWater,  new { @name = "Whether_drinkingRadios", @id = "Whether_drinkingRadiosYes", @class = ""})
                                        </div>
                                    </div>
                                </div>
                                <!--/span-->
                                <div class="col-md-3">
                                    <div class="form-group">
                                        <label class="control-label col-md-12">रॉ मटेरियल साइडिंग उपलब्धता </label>
                                        <div class="col-md-12">
                                            @Html.CheckBoxFor(m => m.IsRawMaterialsSiding, new { @name = "Whether_materialRadios", @id = "Whether_materialRadiosYes", @class = "" })   
                                        </div>
                                    </div>
                                </div>
                                <!--/span-->
                                <div class="col-md-3">
                                    <div class="form-group">
                                        <label class="control-label col-md-12">औद्योगिक पार्क उपलब्धता</label>
                                        <div class="col-md-12">
                                            @Html.CheckBoxFor(m => m.IsIndustrialPark, new { @name = "Whether_industrial_park_availableRadios", @id = "Whether_industrial_park_availableRadiosYes", @class = ""})
                                        </div>
                                    </div>
                                </div>
                                <!--/span-->
                            </div>
                            <!--/row-->                           
                        </div>
                        <div class="form-actions">
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="row">
                                        <div class="col-md-offset-9 col-md-12">
                                            <button type="submit" class="btn green" onclick="Save()">Submit</button>
                                            <button type="button" class="btn red">Cancel</button>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6"> </div>
                            </div>
                        </div>
                    </form>
                    <!-- END FORM-->
                </div>
            </div>

        <script type="text/javascript">

    $(document).ready(function () {

        $('#ddlDistrict').change(function () {

          //  alert("done");
            $.ajax({
                type: "post",
                url: "/IndustrialAreaMaster/GetTehsil",
                data: { DistID: $('#ddlDistrict').val() },
                datatype: "json",
                traditional: true,
                success: function (data) {
                    $('#ddlTehsil').empty();
                    var district = "<option value=-1>Select</option>";
                    //var district = '';
                    for (var i = 0; i < data.length; i++)
                    {
                     district = district + '<option value=' + data[i].Value + '>' + data[i].Text + '</option>';
                    }
                    //district = district + '</select>';
                    //alert(district);
                    $('#ddlTehsil').append(district);
                }
            });
        });

        $('#ddlTehsil').change(function () {
            //alert($('#ddlTehsil').val());
            $.ajax({
                type: "post",
                url: "/IndustrialAreaMaster/GetBlock",
                data: { TehID: $('#ddlTehsil').val() },
                datatype: "json",
                traditional: true,
                success: function (data) {
                    $('#ddlBlock').empty();
                    var block = '<option value=-1>Select</option>';
                    // var district = "<select id='ddlTehsil'>";
                    //var block = '';
                    for (var i = 0; i < data.length; i++) {
                        block = block + '<option value=' + data[i].Value + '>' + data[i].Text + '</option>';
                    }
                    //  district = district + '</select>';
                    //alert(district);
                    $('#ddlBlock').append(block);
                }
            });
        });

        $('#ddlBlock').change(function () {
            $.ajax({
                type: "post",
                url: "/IndustrialAreaMaster/GetVillage",
                data: { BlockID: $('#ddlBlock').val() },
                datatype: "json",
                traditional: true,
                success: function (data) {
                    $('#ddlVillage').empty();
                    var village = "<option value=-1>Select</option>";
                    //var village = '';
                    for (var i = 0; i < data.length; i++) {
                        village = village + '<option value=' + data[i].Value + '>' + data[i].Text + '</option>';
                    }
                    //  district = district + '</select>';
                    //alert(district);
                    $('#ddlVillage').append(village);
                }
            });
        });
    });

   

    var specialKeys = new Array();
    specialKeys.push(47); // for Forward Slash(/)
    specialKeys.push(8); //Backspace
    specialKeys.push(9); // Tab
    specialKeys.push(46); // for .
    specialKeys.push(37); // for left Arrow
    specialKeys.push(39); // for Right Arrow
    function IsNumeric(e) {
        var keyCode = e.which ? e.which : e.keyCode
        var ret = ((keyCode >= 48 && keyCode <= 57) || specialKeys.indexOf(keyCode) != -1); // For Decimal To All Number
        if (ret == false) {
            alert("Only numaric value allwed.");
        }
        return ret;
    }
    function validate(e) {
        var regexp1 = new RegExp("[^a-z|^A-Z]");
        if (regexp1.test(e.key)) {
            alert("Only alphabets from a-z and A-Z are allowed");
            return false;
        }
    }
        </script>

        <script type="text/javascript">
                function Save()
                {
                    if (document.getElementById("txtEstablished_industrial").value == "")
                    {
                        document.getElementById("txtEstablished_industrial").focus();
                        alert("Please Enter Location");
                        return;
                    }
                    var IsStreet = $("#Accessibility_location_available_notYes").is(":checked");
                    var IsElectriccity = $("#Whether_electricity_Available_notRadiosYes").is(":checked");
                    var IsDrainage = $("#Whether_Drainage_facility_AvailableRadios").is(":checked");
                    var IsDrinkingWater = $("#Whether_drinkingRadiosYes").is(":checked");
                    var IsRawMaterialsSiding = $("#Whether_materialRadiosYes").is(":checked");
                    var IsIndustrialPark = $("#Whether_industrial_park_availableRadiosYes").is(":checked");

                   
                
                    try {
                        var M01 = {
                            "IndustrialAreaCode": document.getElementById("hfIndustrialAreaCode").value,
                            "IndustrialAreaName": document.getElementById("txtEstablished_industrial").value,
                            "Establishment": document.getElementById("Establishment").value,
                            "Address": document.getElementById("txtAddress").value,
                            "tbl_DistrictID": document.getElementById("ddlDistrict").value,
                            "tbl_TehsilID": document.getElementById("ddlTehsil").value,
                            "tbl_TehsilID": document.getElementById("ddlBlock").value,
                            "tbl_ThanaID": document.getElementById("ddlVillage").value,
                            "PinCode": document.getElementById("txtPincode").value,
                            "AreaPerSqfeet": document.getElementById("txtArea").value,
                            "DistancePerSqFeet": document.getElementById("txtdistance").value,
                            "PlotNo": document.getElementById("txtCurrentlynumbertotaldevelopedlandarea").value,
                            "ShadeNo": document.getElementById("txttotaldevelopedlandarea_Number_sheds").value,
                            "NearestRailwayStationKm": document.getElementById("txtDistancekilometers_station").value,
                            "NearestBusStationKM": document.getElementById("txtAccess_distancenet_bus_stand").value,
                            "IsStreet": IsStreet,//document.getElementById("Accessibility_location_available_notYes").checked,
                            "IsElectriccity":  IsElectriccity,//document.getElementById("Whether_electricity_Available_notRadiosYes").checked,
                            "IsDrainage":  IsDrainage,//document.getElementById("Whether_Drainage_facility_AvailableRadios").checked,
                            "IsDrinkingWater":  IsDrinkingWater,//document.getElementById("Whether_drinkingRadiosYes").checked,
                            "IsRawMaterialsSiding":  IsRawMaterialsSiding,//document.getElementById("Whether_materialRadiosYes").checked,
                            "IsIndustrialPark":  IsIndustrialPark,//document.getElementById("Whether_industrial_park_availableRadiosYes").checked,
                        }
                        $.ajax({
                            url: '/IndustrialAreaMaster/InsertLoc',
                            data: JSON.stringify({ M01: M01, Isdel:false }),
                            type: 'POST',
                            contentType: 'application/json; charset=utf-8',
                            success: function (data) {
                                alert(data);
                                location.reload();
                            }
                        });
                    } catch (e) {
                        alert(e.message);

                    }
                    
                }
        </script>

        }

</div>
    </div>

